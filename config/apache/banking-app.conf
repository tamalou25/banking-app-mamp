# Configuration Apache pour l'application bancaire
# Fichier à placer dans: /Applications/MAMP/conf/apache/extra/banking-app.conf
# Puis inclure dans httpd.conf avec: Include conf/extra/banking-app.conf

# Activer les modules nécessaires
LoadModule cgi_module modules/mod_cgi.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule headers_module modules/mod_headers.so

# Configuration du répertoire de l'application
<Directory "/Applications/MAMP/htdocs/banking-app">
    Options Indexes FollowSymLinks ExecCGI
    AllowOverride All
    Require all granted
    
    # Activer les scripts CGI Python
    AddHandler cgi-script .py
    
    # Configuration CORS
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
</Directory>

# Alias pour l'API Python
ScriptAlias /api/ "/Applications/MAMP/htdocs/banking-app/backend/"

<Directory "/Applications/MAMP/htdocs/banking-app/backend">
    Options +ExecCGI
    SetHandler cgi-script
    Require all granted
    
    # Définir l'interpréteur Python
    AddHandler cgi-script .py
    
    # Variables d'environnement pour Python
    SetEnv PYTHONPATH "/Applications/MAMP/htdocs/banking-app/backend"
</Directory>

# Configuration pour le frontend
<Directory "/Applications/MAMP/htdocs/banking-app/frontend">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
    DirectoryIndex index.html
</Directory>

# Redirection du root vers le frontend
RedirectMatch ^/banking-app$ /banking-app/frontend/index.html

# Configuration des logs
ErrorLog "/Applications/MAMP/logs/banking-app-error.log"
CustomLog "/Applications/MAMP/logs/banking-app-access.log" combined
